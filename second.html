<!DOCTYPE html>
<html lang=en>
<head>
    <meta charset=utf-8>
    <meta http-equiv=X-UA-Compatible content="IE=edge">
    <meta name=viewport content="width=device-width,initial-scale=1">
    <link rel=icon href=/favicon.ico>
    <title>第二屏</title>
    <link href=css/app.93e13122.css rel=preload as=style>
    <link href=css/chunk-vendors.859d8c47.css rel=preload as=style>
    <link href=js/app.6348a2ec.js rel=preload as=script>
    <link href=js/chunk-vendors.9099035c.js rel=preload as=script>
    <link href=css/chunk-vendors.859d8c47.css rel=stylesheet>
    <link href=css/app.93e13122.css rel=stylesheet>
    <link rel="stylesheet" href="css/second.css">
</head>
<body  style="width: 100%;height: 100%; margin: 0">
<noscript><strong>We're sorry but map doesn't work properly without JavaScript enabled. Please enable it to
    continue.</strong></noscript>
<div id=app></div>
<script src=js/chunk-vendors.9099035c.js></script>
<script src=js/app.6348a2ec.js></script>
<div class="big_box">
    <div class="mask"></div>
    <video class="video_player2" style="width: 5760px; height: 3240px;" autoplay loop muted>
        <source src="video/video3.mp4" type="video/mp4">
    </video>
    <div id="container" style="height: 100%"></div>
    <div class="font-left">新支点集团<br/>经营大数据</div>
    <div class="num">
        <div class="num_title">旗下品牌今日总销售额：</div>
        <div class="num_num">

        </div>
        <div class="num_font">元</div>
    </div>
    <div class="pro">
        <div class="pro_title">
            <ul>
                <li style="width: 81px;">排序</li>
                <li class="li_center">店铺名称</li>
                <li style="width: 125px;">日销售额</li>
            </ul>
        </div>
        <div class="pro_list">

        </div>
    </div>
    <div class="hot">
        <div class="hot_title">
            <ul>
                <li style="width: 81px;">排序</li>
                <li class="li_center">商品名称</li>
                <li style="width: 125px;">日销售额</li>
            </ul>
        </div>
        <div class="hot_list">

        </div>
    </div>
</div>
<script src=/js/chunk-vendors.9099035c.js></script>
<script src=/js/app.db0ee040.js></script>
<script src="js/jquery.min.js"></script>
<script src="js/index.js"></script>
<script>
    var shopInitMoney = 0;
    var goodInitMoney = 0;
    var shopDatas = [
        {name: '锅先森（57号店）', value: shopInitMoney},
        {name: '柠檬工坊（108号店）', value: shopInitMoney},
        {name: '鱼火火（97号店）', value: shopInitMoney},
        {name: '张一碗（76号店）', value: shopInitMoney},
        {name: '贝克汉堡（64号店）', value: shopInitMoney},
        {name: '山村米姑娘（128号店）', value: shopInitMoney},
        {name: '蒸美味（141号店）', value: shopInitMoney},
        {name: '乔东家排骨大包（131号店）', value: shopInitMoney},
        {name: '瓦罐香沸（88号店）', value: shopInitMoney},
        {name: '壹点壹（80号店）', value: shopInitMoney},
        {name: '姥娘包子（83号店）', value: shopInitMoney},
        {name: '张一碗（87号店）', value: shopInitMoney},
        {name: '贝克汉堡（118号店）', value: shopInitMoney},
        {name: '鱼火火（91号店）', value: shopInitMoney},
        {name: '瓦罐香沸（66号店）', value: shopInitMoney},
        {name: '柠檬工坊（60号店）', value: shopInitMoney},
        {name: '锅先森（158号店）', value: shopInitMoney},
        {name: '张一碗（149号店）', value: shopInitMoney},
        {name: '壹点壹（181号店）', value: shopInitMoney},
        {name: '瓦罐香沸（67号店）', value: shopInitMoney},
        {name: '贝克汉堡（92号店）', value: shopInitMoney},
        {name: '蒸美味（89号店）', value: shopInitMoney},
        {name: '鱼火火（41号店）', value: shopInitMoney},
        {name: '壹点壹（55号店）', value: shopInitMoney},
        {name: '贝克汉堡（44号店）', value: shopInitMoney},
        {name: '乔东家排骨大包（98号店）', value: shopInitMoney},
        {name: '张一碗（86号店）', value: shopInitMoney},
        {name: '姥娘包子（133号店）', value: shopInitMoney},
        {name: '山村米姑娘（101号店）', value: shopInitMoney},
        {name: '锅先森（72号店）', value: shopInitMoney},
        {name: '瓦罐香沸（46号店）', value: shopInitMoney},
        {name: '鱼火火（70号店）', value: shopInitMoney},
    ];
    var goodDatas = [
        {name: '台式卤肉饭', value: goodInitMoney},
        {name: '香辣排骨', value: goodInitMoney},
        {name: '香菇滑鸡', value: goodInitMoney},
        {name: '柠檬水', value: goodInitMoney},
        {name: '冻柠茶', value: goodInitMoney},
        {name: '原味奶茶', value: goodInitMoney},
        {name: '麻辣烤鱼', value: goodInitMoney},
        {name: '藤椒烤鱼', value: goodInitMoney},
        {name: '番茄烤鱼', value: goodInitMoney},
        {name: '金汤过桥米线', value: goodInitMoney},
        {name: '麻辣过桥米线', value: goodInitMoney},
        {name: '酸菜过桥米线', value: goodInitMoney},
        {name: '咖喱脆骨炒饭', value: goodInitMoney},
        {name: '扬州炒饭', value: goodInitMoney},
        {name: '菠萝腰果炒饭', value: goodInitMoney},
        {name: '黑椒蒸排骨', value: goodInitMoney},
        {name: '咖喱蒸鸡', value: goodInitMoney},
        {name: '豉汁排骨', value: goodInitMoney},
        {name: '奥尔良鸡腿堡', value: goodInitMoney},
        {name: '香辣鸡腿堡', value: goodInitMoney},
        {name: '原味鸡腿堡', value: goodInitMoney},
        {name: '招牌排骨大包', value: goodInitMoney},
        {name: '白菜排骨大包', value: goodInitMoney},
        {name: '豆角排骨大包', value: goodInitMoney},
        {name: '瓦罐红烧肉', value: goodInitMoney},
        {name: '瓦罐排骨玉米汤', value: goodInitMoney},
        {name: '瓦罐黄豆猪手', value: goodInitMoney},
        {name: '原味鸡腿堡', value: goodInitMoney},
        {name: '香辣鸡腿堡', value: goodInitMoney},
        {name: '爆浆鸡排', value: goodInitMoney},
        {name: '全家福大包', value: goodInitMoney},
        {name: '招牌酱肉包', value: goodInitMoney},
        {name: '韭菜肉丁包', value: goodInitMoney},
    ];
    var proList = $('.pro_list');
    var hotList = $('.hot_list');
    var randomNumMax = 5;
    var randomNumMix = 1;
    var peakData = [10, 13];
    var thirdPeakData = [13.1, 17];
    var secondPeakData = [17.1, 20];
    var timeListMoney = [
        {time: 0, moeny: 0},
        {time: 1, moeny: 0},
        {time: 2, moeny: 0},
        {time: 3, moeny: 0},
        {time: 4, moeny: 0},
        {time: 5, moeny: 1707},
        {time: 6, moeny: 18777},
        {time: 7, moeny: 104130},
        {time: 8, moeny: 274837},
        {time: 9, moeny: 530898},
        {time: 10, moeny: 536019},
        {time: 11, moeny: 621372},
        {time: 12, moeny: 4035522},
        {time: 13, moeny: 4889059},
        {time: 14, moeny: 5059766},
        {time: 15, moeny: 5080250},
        {time: 16, moeny: 5088785},
        {time: 17, moeny: 5093906},
        {time: 18, moeny: 5401179},
        {time: 19, moeny: 6766839},
        {time: 20, moeny: 8473914},
        {time: 21, moeny: 8559276},
        {time: 22, moeny: 8564388},
        {time: 23, moeny: 8566093},
    ];
    var myDate = new Date();
    var hours = myDate.getHours(); //获取当前小时数(0-23)
    var timeMoney = timeListMoney[hours].moeny;
    // 获取到当前时刻应该有的钱数
    var shopAllMoney = Math.round(timeMoney * 0.4), goodAllMoney = Math.round(timeMoney * 0.6);
    // 随机分配给每个店铺，每个商品
    var shopLength = shopDatas.length, goodLength = goodDatas.length;
    // 定义初始值
    for (i = 0; i < shopLength; i++) {
        var randomMoney = Math.floor(Math.random() * shopAllMoney * 0.1);
        shopAllMoney -= randomMoney;
        var value = shopDatas[i];
        value.value = randomMoney;
        shopDatas.splice(i, 1, value);
    }
    for (i = 0; i < goodLength; i++) {
        var randomMoney = Math.floor(Math.random() * goodAllMoney * 0.1);
        goodAllMoney -= randomMoney;
        var value = goodDatas[i];
        value.value = randomMoney;
        goodDatas.splice(i, 1, value);
    }
    // 判断此时小时是否在某个区间内
    function inHours(arr, hours) {
        if (hours >= arr[0] && hours <= arr[1]) {
            return true;
        }
        return false;
    }
    //随机获取几个
    function getRandomNum(){
        var randomNum = Math.floor(Math.random() * (randomNumMax - randomNumMix) + randomNumMix);
        return randomNum;
    }
    //得到店铺随机钱数
    function getShopRandomNum() {
        var minShopMoney = 66;
        var maxShopMoney = 222;
        var startHours = myDate.getHours();
        if (inHours(peakData, startHours)) {
            var minShopMoney = 200;
            var maxShopMoney = 666;
        }
        if (inHours(secondPeakData, startHours)) {
            var minShopMoney = 133;
            var maxShopMoney = 444;
        }
        if (inHours(thirdPeakData, startHours)) {
            var minShopMoney = 100;
            var maxShopMoney = 333;
        }
        var randomNum = Math.floor(Math.random() * (maxShopMoney - minShopMoney) + minShopMoney);
        return randomNum;
    }
    //得到商品随机钱数
    function getGoodRandomNum() {
        var minGoodMoney = 100;
        var maxGoodMoney = 333;
        var startHours = myDate.getHours();
        if (inHours(peakData, startHours)) {
            var minGoodMoney = 300;
            var maxGoodMoney = 1000;
        }
        if (inHours(secondPeakData, startHours)) {
            var minGoodMoney = 200;
            var maxGoodMoney = 666;
        }
        if (inHours(thirdPeakData, startHours)) {
            var minGoodMoney = 150;
            var maxGoodMoney = 500;
        }
        var randomNum = Math.floor(Math.random() * (maxGoodMoney - minGoodMoney) + minGoodMoney);
        return randomNum;
    }
    // 从数组中取出某几个元素 取出值删除原数组值 重新合并到原数组
    function getRandomArrayElementsShop(arr, count) {
        var shuffled = arr.slice(0), i = arr.length, min = i - count, temp, index;
        while (i-- > min) {
            index = Math.floor((i + 1) * Math.random());
            temp = shuffled[index];
            arr.splice(index, 1);
            shuffled[index] = shuffled[i];
            shuffled[i] = temp;
        }
        var randomData = shuffled.slice(min);
        for (var z = 0; z < randomData.length; z++) {
            var name = randomData[z].name;
            var endValue = randomData[z].value + getShopRandomNum();
            var endArr = {name: name, value: endValue};
            randomData.splice(z, 1, endArr);
            arr.push(randomData[z]);
        }
        return arr;
    }
    // 从数组中取出某几个元素 取出值删除原数组值 重新合并到原数组
    function getRandomArrayElementsGood(arr, count) {
        var shuffled = arr.slice(0), i = arr.length, min = i - count, temp, index;
        while (i-- > min) {
            index = Math.floor((i + 1) * Math.random());
            temp = shuffled[index];
            arr.splice(index, 1);
            shuffled[index] = shuffled[i];
            shuffled[i] = temp;
        }
        var randomData = shuffled.slice(min);
        for (var z = 0; z < randomData.length; z++) {
            var name = randomData[z].name;
            var endValue = randomData[z].value + getGoodRandomNum();
            var endArr = {name: name, value: endValue};
            randomData.splice(z, 1, endArr);
            arr.push(randomData[z]);
        }
        return arr;
    }
    // 得到随机数组，赋值，重新写入 商店
    function handleShop(data) {
        var randomNum = getRandomNum();
        var arr = getRandomArrayElementsShop(data, randomNum);
        insertShopPage(arr);
    }
    // 得到随机数组，赋值，重新写入 商品
    function handleGood(data) {
        var randomNum = getRandomNum();
        var arr = getRandomArrayElementsGood(data, randomNum);
        insertGoodPage(arr);
    }
    //最终数组写入页面 商店
    function insertShopPage(data) {
        var Temp = 0;
        var length = data.length;
        for (var i = 0; i < length; i++) {
            for (var j = i + 1; j < length; j++) {
                if (data[i].value < data[j].value) {
                    Temp = data[i];
                    data[i] = data[j];
                    data[j] = Temp;
                }
            }
        }
        proList.html('');
        for (z = 0; z < data.length; z++) {
            var str = '<ul>\n' +
                '            <li style="width: 81px;"><span>' + (z + 1) + '</span></li>\n' +
                '            <li class="li_center">' + data[z].name + '</li>\n' +
                '            <li>¥' + data[z].value + '</li>\n' +
                '        </ul>';
            proList.append(str);
        }
    }
    //最终数组写入页面 商品
    function insertGoodPage(data) {
        var Temp = 0;
        var length = data.length;
        for (var i = 0; i < length; i++) {
            for (var j = i + 1; j < length; j++) {
                if (data[i].value < data[j].value) {
                    Temp = data[i];
                    data[i] = data[j];
                    data[j] = Temp;
                }
            }
        }
        hotList.html('');
        for (z = 0; z < data.length; z++) {
            var str = '<ul>\n' +
                '            <li style="width: 81px;"><span>' + (z + 1) + '</span></li>\n' +
                '            <li class="li_center">' + data[z].name + '</li>\n' +
                '            <li>¥' + data[z].value + '</li>\n' +
                '        </ul>';
            hotList.append(str);
        }
    }
    // 随机秒数
    function setRandomTime() {
        var startHours = myDate.getHours();
        var minSecond = 10000;
        var maxSecond = 20000;
        if (inHours(peakData, startHours)) {
            var minSecond = 7000;
            var maxSecond = 17000;
        }
        if (inHours(secondPeakData, startHours)) {
            var minSecond = 8000;
            var maxSecond = 18000;
        }
        if (inHours(thirdPeakData, startHours)) {
            var minSecond = 9000;
            var maxSecond = 19000;
        }
        var randomTime = Math.floor(Math.random() * (maxSecond - minSecond) + minSecond);
        return randomTime;
    }
    // 先把原始数据添加进去 商店
    handleShop(shopDatas);

    // 先把原始数据添加进去 商品
    handleGood(goodDatas);
    function togther() {
        var time = setRandomTime();
        time1 = setInterval(function () {
            handleGood(goodDatas);
            handleShop(shopDatas);
            clearInterval(time1);
            togther();
        },time);
        var goodResult = 0;
        for(var i = 0; i < goodDatas.length; i++) {
            goodResult += goodDatas[i].value;
        }
        var shopResult = 0;
        for(var i = 0; i < shopDatas.length; i++) {
            shopResult += shopDatas[i].value;
        }
        var num = goodResult + shopResult;
        $(".num_num").rollNum({
            deVal: num,
            digit: 7
        });
    }
    togther();
</script>
</body>
</html>